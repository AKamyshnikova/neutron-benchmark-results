<html>
<head><title>Benchmark results</title></head>
<body>
    <h1>Shaker</h1>
    <table border="1">
    <thead style="text-align: center; font-weight: bold">
        <td>Scenario</td><td>restart</td><td>ha</td><td>lost</td><td>errors</td><td>link</td>
    </thead>
    <tbody>
    {% for scenario, results in shaker|groupby('scenario') %}
        {% for result in results %}
        <tr>
            {% if loop.first %}
            <td rowspan="{{ results|count }}">{{ scenario }}</td>
            {% endif %}
            <td style="text-align: center">
                {% if 'restart' in result.filename %}
                &#128504;
                {% else %}
                &#65794;
                {% endif %}
            </td>
            <td style="text-align: center">
                {% if 'ha' not in result.filename %}
                &#128504;
                {% else %}
                &#65794;
                {% endif %}
            </td>
            <td style="text-align: center">{{ result.statuses.lost }}</td>
            <td style="text-align: center">{{ result.statuses.error }}</td>
            <td><a href="{{ result.filepath }}">{{ result.filename }}</a></td>
        </tr>
        {% endfor %}
    {% endfor %}
    </tbody>
    </table>

    <h1>Rally</h1>
    <table border="1">
    <thead style="text-align: center; font-weight: bold">
        <td>Scenario</td><td>concurrency</td><td>times</td><td>errors</td><td>link</td>
    </thead>
    <tbody>
    {% for result in rally %}
        {% for source in result.sources %}
        <tr>
            <td>{{ source.name }}</td>
            <td>{{ source.concurrency }}</td>
            <td>{{ source.times }}</td>
            <td>{{ result.errors[loop.index0] }}</td>
            {% if loop.first %}
            <td rowspan={{ result.sources|count }}><a href="{{ result.filepath }}">{{ result.filename }}</a></td>
            {% endif %}
        </tr>
        {% endfor %}
    {% endfor %}
    </tbody>
    </table>
</body>
</html>
